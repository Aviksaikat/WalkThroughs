#!/usr/bin/python3
import json
import random

import names
import requests


def get_content():
	word_site = "https://www.mit.edu/~ecprice/wordlist.10000"

	response = requests.get(word_site)
	WORDS = response.content.splitlines()

	return WORDS[random.randint(0, len(WORDS))].decode()


url = "http://ptl-54021639-dcbcb7c6.libcurl.so/"
headers = {"Content-Type": "application/json"}

while True:
	n = int(input("\n[*]Options\n1. register\n2. login\n3. list files\n4. retrieve a file\n5. uplaod\n"))

	if n == 1:
		r = requests.post(url + "register", json={"username":"007","password":"jadu1"}, headers=headers)
		# {"token":"Tzo0OiJVc2VyIjoyOntzOjI6ImlkIjtpOjc7czo1OiJsb2dpbiI7czozOiIwMDciO30%3D--61363f83da3cbfa2b6d581a209b9cdc1"}
		token = json.loads(r.text)
		token_register = token["token"]
		print(r.text)

	elif n == 2:
		r = requests.post(url + "login", json={"username":"007","password":"jadu1"}, headers=headers)
		# {"token":"Tzo0OiJVc2VyIjoyOntzOjI6ImlkIjtzOjE6IjciO3M6NToibG9naW4iO3M6MzoiMDA3Ijt9--111161870f5c5de657f2db6f5ebb05c1"}
		token = json.loads(r.text)
		token_login = token["token"]
		print(r.text)

	elif n == 3:
		r = requests.post(url + "files", json={"token":"Tzo0OiJVc2VyIjoyOntzOjI6ImlkIjtzOjE6IjciO3M6NToibG9naW4iO3M6MzoiMDA3Ijt9--111161870f5c5de657f2db6f5ebb05c1"}, headers=headers)
		print(r.text)

	elif n == 4:
		r = requests.post(url + "file", json={"token":"Tzo0OiJVc2VyIjoyOntzOjI6ImlkIjtzOjE6IjciO3M6NToibG9naW4iO3M6MzoiMDA3Ijt9--111161870f5c5de657f2db6f5ebb05c1", "uuid":f"{input('enter uuid: ')}", "sig":f"{input('enter sig: ')}"}, headers=headers)
		print(r.text)

	elif n == 5:
		r = requests.post(url + "upload", json={"token":"Tzo0OiJVc2VyIjoyOntzOjI6ImlkIjtzOjE6IjciO3M6NToibG9naW4iO3M6MzoiMDA3Ijt9--111161870f5c5de657f2db6f5ebb05c1", "filename":f"{names.get_last_name()}", "content": f"{get_content()}"}, headers=headers)
		print(r.text)
